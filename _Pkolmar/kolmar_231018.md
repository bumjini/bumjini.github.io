---
layout: share-distill
title: '[연구 4] 2차처방 데이터 / 1차처방 데이터 학습 보완'
date: 2023-10-17
giscus_comments : false
description: "데이터 검증 및 1차처방 데이터 학습에 대한 추가적인 학습 및 인사이트"
authors: 
    - name: Bumjin Park
      affiliations:
        name: KAIST

img: https://drive.google.com/uc?export=view&id=1oeT2ai2o5n8EeEFi-Dbsk7uqN4CZhmt6
---

## 1. Report Info   

<div class="spanbox" markdown="1" style="width:40rem;background-color:#FFFDFD;">
1. 👨🏻‍💻 **Code Release**:  Tag [v23.10.19.1](https://github.com/fxnnxc/kolmar/tree/v23.10.19.1)
2. 📂 **Raw Data** :  (2.1, `raw_data:second_receipt`)  # 1. 코드별로 합산한 데이터
3. 🗂️ **Datasets** :  (2, `ds:first_receipt_ml`)  # 2.RF and 3. PDP
4. 👾 **Models** :  (1, `svr`) / (2, `random_forest_regressor`)  
5. 🦄 **Trainers** : (1, `sklearn_regressor`)
6. 📌 **Related Notebooks** 
  * [second_receipt_eda notebooks](https://github.com/fxnnxc/kolmar/tree/v23.10.19.1/labs/second_receipt_eda)
  * [partial_dependency_svr.ipynb](https://github.com/fxnnxc/kolmar/blob/v23.10.19.1/labs/first_receipt_rmse/partial_dependency_svr.ipynb)
  * [plot_rmse_rf.ipynb](https://github.com/fxnnxc/kolmar/blob/v23.10.19.1/labs/first_receipt_rmse//plot_rmse_rf.ipynb)

</div>



## 2차 처방 데이터 

1차 처방 50개 코드와 비교해보면, MMM000 이 가장 많이 사용되는 것은 동일하나, 이후부터 코드 순서는 일치하지 않는다. 
* [1차 데이터 순서.json](https://drive.google.com/file/d/19BT4EoPCzjhESs7D5mNeXZqH-7PsoRqe/view?usp=share_link)
* [2차 데이터 순서.json](https://drive.google.com/drive/folders/1i3ovRmBiW5nDCUYhdTQlrqaTimLvI_VI?usp=sharing)
 
### 1차 처방 / 2차 처방 코드 분포 

<div class="spanbox" markdown="1" style="width:60rem;background-color:#FFFDFD;margin-left:-5rem;">
<img src="https://drive.google.com/uc?export=view&id=1L_JVd1oasKDdVA8s23tNF8AsYndP3SpI" style='width:49%'>
<img src="https://drive.google.com/uc?export=view&id=1VM2_2MV_7ej5slA169uffLH9R8NWBEO4" style='width:49%'>
</div>



### 특징들 

1. 입력랩과 출력랩 개수 
* 입력 : 7641 
* 출력 : (783개) (유일 :771개 ) (중복: )
2. 합산해서 100이 되는지 여부 
  * 합신=100 랩 개수 : 4972 
  * 합산!= 100 랩 개수 : 2669


---


## 2. Random Forest 

<img src="https://drive.google.com/uc?export=view&id=1q8kQrssUtgFPFcqIzsATvwo0fPb2XJ0e" style='width:100%'> 


### 성능 (RMSE)

<center>
<img src="https://drive.google.com/uc?export=view&id=1PDIupT4BJRypHvL_16Byg5UG7giDmz8-" style='width:80%'> 
</center>

## 2.3 Error (prediction - target)

<div class="spanbox" markdown="1" style="width:100%">
<img src="https://drive.google.com/uc?export=view&id=1DHkbJGNn6Ga2EeRdfIrXT3-0YKggDVfP" style='width:49%'> 
<img src="https://drive.google.com/uc?export=view&id=1E-2NGm76uRpgWklLW0gynXZYkJ_3ycZW" style='width:49%'> 

</div>





### 하이퍼파리미터 찾기 

<img src="https://drive.google.com/uc?export=view&id=1b8iNmlmi29LuCjQ4w9V0M6hs3NtxHewT" style='width:100%'>  
 


--- 

## 3. Partial Dependency Plot (1차 처방 모델에 대한 검증)

Partial Dependency Plot 

<img src="https://drive.google.com/uc?export=view&id=1oeT2ai2o5n8EeEFi-Dbsk7uqN4CZhmt6" style='width:100%'> 

### SVR 

<img src="https://drive.google.com/uc?export=view&id=1C44tltJ8wxO7TwZtXhR2TESgbTfl-3jP" style='width:100%'> 


<img src="https://drive.google.com/uc?export=view&id=14eKb7ZUb6HSPSdltASYnk226k8eTz7sX" style='width:100%'>  


### Random Forest 

<img src="https://drive.google.com/uc?export=view&id=11oNNMIqHZ6qyLqg-3_1PcUOkIEXpJzXK" style='width:100%'> 



<img src="https://drive.google.com/uc?export=view&id=1ViCXDdASUnjCP1OVglZEyxrEaF-4wafO" style='width:100%'> 



### Random Forest (Zoom in)



<img src="https://drive.google.com/uc?export=view&id=1bMXzDLyqMRIDL8ei20Xox9Ea2qYO9qpK" style='width:100%'> 


<img src="https://drive.google.com/uc?export=view&id=1Rw9RvjQqWoAfFnp1SzAB9xdKnl7DkyUf" style='width:100%'> 




## 4. 결론 


